<template>
  <div class="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800 relative overflow-hidden">
    <!-- åŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="absolute inset-0">
      <div class="stars"></div>
      <div class="twinkling"></div>
    </div>
    
    <!-- æµ®åŠ¨è£…é¥°å…ƒç´  - ç§»åŠ¨ç«¯ä¼˜åŒ– -->
    <div class="absolute top-16 left-4 sm:top-20 sm:left-10 text-2xl sm:text-4xl animate-float">ğŸŒŸ</div>
    <div class="absolute top-24 right-8 sm:top-32 sm:right-16 text-xl sm:text-3xl animate-bounce delay-300">ğŸˆ</div>
    <div class="absolute top-32 left-1/4 text-3xl sm:text-5xl animate-pulse delay-500">âœ¨</div>
    <div class="absolute bottom-20 right-8 sm:bottom-32 sm:right-20 text-2xl sm:text-4xl animate-spin-slow">ğŸª</div>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="relative z-10">

      <!-- è‹±é›„åŒºåŸŸ -->
      <div class="text-center py-12 sm:py-16 lg:py-20 px-4">
        <div class="max-w-4xl mx-auto">
          <!-- ä¸»æ ‡é¢˜ -->
          <div class="mb-6 sm:mb-8">
            <div class="text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-400 animate-pulse mb-3 sm:mb-4 leading-tight">
              æ•°å­¦é­”æ³•å­¦é™¢
            </div>
            <div class="text-lg sm:text-xl md:text-2xl lg:text-3xl text-yellow-200 font-bold mb-4 sm:mb-6 px-2">
              ğŸŒŸ è®©æ¯ä¸ªå­©å­éƒ½æˆä¸ºæ•°å­¦å°é­”æ³•å¸ˆï¼ ğŸŒŸ
            </div>
          </div>

          <!-- ç‰¹è‰²äº®ç‚¹ -->
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8 sm:mb-12">
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:scale-105 min-h-[120px] flex flex-col justify-center">
              <div class="text-3xl sm:text-4xl mb-2 sm:mb-3">ğŸ¬</div>
              <div class="text-white font-bold text-base sm:text-lg">é­”æ³•åŠ¨ç”»</div>
              <div class="text-yellow-200 text-sm sm:text-base mt-1 sm:mt-2">çœ‹æ•°å­—è·³èˆï¼Œè®©è®¡ç®—å˜é­”æœ¯</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:scale-105 min-h-[120px] flex flex-col justify-center">
              <div class="text-3xl sm:text-4xl mb-2 sm:mb-3">ğŸ®</div>
              <div class="text-white font-bold text-base sm:text-lg">æ¸¸æˆé—¯å…³</div>
              <div class="text-yellow-200 text-sm sm:text-base mt-1 sm:mt-2">è¾¹ç©è¾¹å­¦ï¼Œè½»æ¾æŒæ¡æŠ€å·§</div>
            </div>
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 transform hover:scale-105 min-h-[120px] flex flex-col justify-center sm:col-span-2 lg:col-span-1">
              <div class="text-3xl sm:text-4xl mb-2 sm:mb-3">ğŸ†</div>
              <div class="text-white font-bold text-base sm:text-lg">æˆå°±ç³»ç»Ÿ</div>
              <div class="text-yellow-200 text-sm sm:text-base mt-1 sm:mt-2">æ”¶é›†å¾½ç« ï¼Œè§è¯æ¯æ¬¡è¿›æ­¥</div>
            </div>
          </div>

          <!-- ä¸»è¦è¡ŒåŠ¨æŒ‰é’® -->
          <div class="flex flex-col gap-3 sm:gap-4 justify-center items-center mb-8 sm:mb-12 px-4">
            <router-link
              to="/learning"
              class="group relative w-full sm:w-auto px-8 sm:px-12 py-4 sm:py-5 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold text-lg sm:text-xl rounded-full shadow-2xl hover:shadow-yellow-500/25 transition-all duration-300 transform hover:scale-105 hover:-translate-y-1 min-h-[56px] flex items-center justify-center"
            >
              <span class="relative z-10">ğŸš€ å¼€å§‹é­”æ³•ä¹‹æ—…</span>
              <div class="absolute inset-0 bg-gradient-to-r from-yellow-300 to-orange-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            </router-link>
            <router-link
              to="/practice"
              class="group relative w-full sm:w-auto px-8 sm:px-12 py-4 sm:py-5 bg-transparent border-2 border-white text-white font-bold text-lg sm:text-xl rounded-full hover:bg-white hover:text-purple-900 transition-all duration-300 transform hover:scale-105 min-h-[56px] flex items-center justify-center"
            >
              ğŸ¯ æŒ‘æˆ˜ç»ƒä¹ åœº
            </router-link>
          </div>

          <!-- æ•°å­¦å…¬å¼å±•ç¤º -->
          <div class="bg-white/5 backdrop-blur-sm rounded-3xl p-6 sm:p-8 border border-white/10">
            <div class="text-yellow-300 text-base sm:text-lg font-bold mb-3 sm:mb-4">âœ¨ ä»Šæ—¥é­”æ³•å…¬å¼ âœ¨</div>
            <div class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-2 sm:mb-3 leading-tight">15 - 8 = ?</div>
            <div class="text-lg sm:text-xl md:text-2xl text-yellow-200 leading-relaxed">ç”¨ç ´åæ³•ï¼š15 - 5 - 3 = 7 ğŸ‰</div>
          </div>
        </div>
      </div>

      <!-- å­¦ä¹ æ–¹æ³•å±•ç¤ºåŒºåŸŸ -->
      <div class="py-20 px-4">
        <div class="max-w-7xl mx-auto">
          <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
              ğŸ¯ ä¸‰å¤§é­”æ³•æŠ€èƒ½ ğŸ¯
            </h2>
            <p class="text-xl text-yellow-200 max-w-3xl mx-auto">
              æŒæ¡è¿™ä¸‰ç§ç¥å¥‡çš„è®¡ç®—æ–¹æ³•ï¼Œä½ å°±æ˜¯æ•°å­¦ä¸–ç•Œçš„è¶…çº§è‹±é›„ï¼
            </p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div v-for="(method, index) in mathMethods" :key="method.name" class="group">
              <div class="bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-sm rounded-3xl p-8 border border-white/20 hover:border-yellow-400/50 transition-all duration-500 transform hover:scale-105 hover:-translate-y-2 relative overflow-hidden">
                <!-- èƒŒæ™¯å…‰æ•ˆ -->
                <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/10 to-pink-400/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                
                <!-- å†…å®¹ -->
                <div class="relative z-10">
                  <div class="text-center mb-6">
                    <div class="text-6xl mb-4 transform group-hover:scale-110 transition-transform duration-300">
                      {{ ['ğŸ§®', 'ğŸ’¥', 'âš¡'][index] }}
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-2">{{ method.name }}</h3>
                    <div class="w-16 h-1 bg-gradient-to-r from-yellow-400 to-pink-400 mx-auto rounded-full"></div>
                  </div>
                  
                  <p class="text-yellow-200 text-center mb-6 leading-relaxed">
                    {{ method.description }}
                  </p>
                  
                  <!-- æŠ€èƒ½ç‰¹ç‚¹ -->
                  <div class="space-y-2 mb-8">
                    <div v-for="(step, stepIndex) in method.steps.slice(0, 3)" :key="stepIndex" class="flex items-center text-sm text-white/80">
                      <div class="w-6 h-6 bg-gradient-to-r from-yellow-400 to-pink-400 rounded-full flex items-center justify-center text-black font-bold text-xs mr-3">
                        {{ stepIndex + 1 }}
                      </div>
                      {{ step }}
                    </div>
                  </div>
                  
                  <button
                    @click="selectMethodAndNavigate(method)"
                    class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-300 hover:to-orange-400 text-black font-bold py-4 px-6 rounded-2xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-yellow-500/25"
                  >
                    ğŸš€ å­¦ä¹ è¿™ä¸ªæŠ€èƒ½
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æˆå°±ä¸ç»Ÿè®¡å±•ç¤º -->
      <div class="py-20 px-4">
        <div class="max-w-6xl mx-auto">
          <div class="text-center mb-16">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
              ğŸ† åŠ å…¥é­”æ³•å­¦é™¢å¤§å®¶åº­ ğŸ†
            </h2>
            <p class="text-xl text-yellow-200">
              å’Œå…¨ä¸–ç•Œçš„å°é­”æ³•å¸ˆä»¬ä¸€èµ·æˆé•¿ï¼Œè§è¯ä½ çš„æ¯ä¸€æ¬¡è¿›æ­¥ï¼
            </p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
            <div v-for="(stat, index) in stats" :key="stat.label" class="text-center">
              <div class="bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-sm rounded-3xl p-8 border border-white/20 hover:border-yellow-400/50 transition-all duration-300 transform hover:scale-105">
                <div class="text-6xl mb-4">{{ ['ğŸ¯', 'ğŸ®', 'ğŸ†'][index] }}</div>
                <div class="text-4xl font-bold text-yellow-400 mb-2">{{ stat.value }}</div>
                <div class="text-xl text-white font-medium">{{ stat.label }}</div>
              </div>
            </div>
          </div>

          <!-- ç‰¹è‰²åŠŸèƒ½å±•ç¤º -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div v-for="feature in features" :key="feature.name" class="bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-sm rounded-3xl p-8 border border-white/20 hover:border-yellow-400/50 transition-all duration-300 transform hover:scale-105">
              <div class="flex items-start space-x-4">
                <div class="text-4xl">{{ feature.emoji }}</div>
                <div>
                  <h3 class="text-xl font-bold text-white mb-2">{{ feature.name }}</h3>
                  <p class="text-yellow-200 leading-relaxed">{{ feature.description }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æœ€ç»ˆè¡ŒåŠ¨å·å¬åŒºåŸŸ -->
      <div class="py-20 px-4">
        <div class="max-w-4xl mx-auto text-center">
          <div class="bg-gradient-to-br from-yellow-400/20 to-orange-500/20 backdrop-blur-sm rounded-3xl p-12 border border-yellow-400/30">
            <h2 class="text-4xl md:text-5xl font-bold text-white mb-6">
              ğŸš€ å‡†å¤‡å¥½æˆä¸ºæ•°å­¦é­”æ³•å¸ˆäº†å—ï¼Ÿ
            </h2>
            <p class="text-xl text-yellow-200 mb-8 leading-relaxed">
              åŠ å…¥æˆ‘ä»¬çš„é­”æ³•å­¦é™¢ï¼Œå¼€å¯ä¸€æ®µå……æ»¡æƒŠå–œå’Œæˆå°±æ„Ÿçš„æ•°å­¦å­¦ä¹ ä¹‹æ—…ï¼
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-8">
              <router-link
                to="/learning"
                @click="playSound('click')"
                class="group relative px-10 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold text-xl rounded-full shadow-2xl hover:shadow-yellow-500/25 transition-all duration-300 transform hover:scale-110 hover:-translate-y-1"
              >
                <span class="relative z-10">ğŸ“ å¼€å§‹å­¦ä¹ é­”æ³•</span>
                <div class="absolute inset-0 bg-gradient-to-r from-yellow-300 to-orange-400 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              </router-link>
              <router-link
                to="/practice"
                @click="playSound('click')"
                class="group relative px-10 py-4 bg-transparent border-2 border-yellow-400 text-yellow-400 font-bold text-xl rounded-full hover:bg-yellow-400 hover:text-black transition-all duration-300 transform hover:scale-110"
              >
                ğŸ¯ æŒ‘æˆ˜é­”æ³•è¯•ç‚¼
              </router-link>
            </div>
            
            <div class="text-yellow-300 text-lg">
              âœ¨ æ¯ä¸€æ¬¡ç»ƒä¹ éƒ½æ˜¯ä¸€æ¬¡é­”æ³•çš„é‡Šæ”¾ âœ¨
            </div>
          </div>
        </div>
      </div>

      <!-- é¡µè„š -->
      <footer class="py-12 px-4 border-t border-white/10">
        <div class="max-w-6xl mx-auto">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
            <div>
              <div class="flex items-center justify-center md:justify-start space-x-2 mb-4">
                <div class="text-2xl">ğŸ“</div>
                <span class="text-xl font-bold text-white">æ•°å­¦é­”æ³•å­¦é™¢</span>
              </div>
              <p class="text-yellow-200 leading-relaxed">
                è®©æ¯ä¸ªå­©å­éƒ½èƒ½åœ¨å¿«ä¹ä¸­å­¦ä¹ æ•°å­¦ï¼Œåœ¨æ¸¸æˆä¸­æŒæ¡æŠ€èƒ½ã€‚
              </p>
            </div>
            
            <div>
              <h3 class="text-lg font-bold text-white mb-4">ğŸ¯ å­¦ä¹ å†…å®¹</h3>
              <ul class="space-y-2 text-yellow-200">
                <li>ğŸ§® å‡‘åæ³•é­”æ³•</li>
                <li>ğŸ’¥ ç ´åæ³•æŠ€èƒ½</li>
                <li>âš¡ å¹³åæ³•ç§˜ç±</li>
              </ul>
            </div>
            
            <div>
              <h3 class="text-lg font-bold text-white mb-4">ğŸ® åŠŸèƒ½ç‰¹è‰²</h3>
              <ul class="space-y-2 text-yellow-200">
                <li>ğŸ¬ åŠ¨ç”»æ¼”ç¤º</li>
                <li>ğŸ¯ äº’åŠ¨ç»ƒä¹ </li>
                <li>ğŸ† æˆå°±ç³»ç»Ÿ</li>
              </ul>
            </div>
          </div>
          
          <div class="mt-12 pt-8 border-t border-white/10 text-center">
            <p class="text-yellow-200">
              Â© 2024 æ•°å­¦é­”æ³•å­¦é™¢ - è®©å­¦ä¹ å˜æˆæœ€å¥½ç©çš„å†’é™© ğŸŒŸ
            </p>
          </div>
        </div>
      </footer>
    </div>
  </div>
</template>

<script setup lang="ts">
import { useRouter } from 'vue-router'
import { useGameStore } from '@/stores/game'
import { playSound } from '@/utils/audioManager'
import type { MathMethod } from '@/types'

const router = useRouter()
const gameStore = useGameStore()

const features = [
  {
    name: 'ğŸ¬ è¶…é…·åŠ¨ç”»æ¼”ç¤º',
    description: 'ğŸŒŸ é€šè¿‡ç²¾å½©çš„åŠ¨ç”»å’Œå½©è‰²å›¾å½¢ï¼Œè®©æ•°å­¦è®¡ç®—è¿‡ç¨‹å˜å¾—ç”ŸåŠ¨æœ‰è¶£ï¼Œå°±åƒçœ‹åŠ¨ç”»ç‰‡ä¸€æ ·ï¼',
    emoji: 'ğŸ¬'
  },
  {
    name: 'ğŸ® è¶£å‘³äº’åŠ¨ç»ƒä¹ ',
    description: 'ğŸ¯ ä¸°å¯Œå¤šå½©çš„ç»ƒä¹ é¢˜ç›®ï¼Œæ¯ç­”å¯¹ä¸€é¢˜éƒ½æœ‰æƒŠå–œåé¦ˆï¼Œè®©å­¦ä¹ å˜æˆå¥½ç©çš„æ¸¸æˆï¼',
    emoji: 'ğŸ®'
  },
  {
    name: 'ğŸ“Š æˆé•¿è®°å½•è¿½è¸ª',
    description: 'ğŸ† è®°å½•æ¯ä¸€æ¬¡è¿›æ­¥å’Œæˆå°±ï¼Œçœ‹ç€è‡ªå·±ä¸€å¤©å¤©å˜æˆæ•°å­¦å°èƒ½æ‰‹ï¼',
    emoji: 'ğŸ“Š'
  },
  {
    name: 'ğŸ¨ ä¸“å±å­¦ä¹ ä½“éªŒ',
    description: 'âœ¨ æ ¹æ®ä½ çš„å­¦ä¹ æƒ…å†µæ™ºèƒ½è°ƒæ•´ï¼Œæ¯ä¸ªå°æœ‹å‹éƒ½æœ‰ä¸“å±çš„å­¦ä¹ å†’é™©ï¼',
    emoji: 'ğŸ¨'
  }
]

const mathMethods = gameStore.availableMethods

const stats = [
  { label: 'ğŸ¯ å­¦ä¹ é­”æ³•', value: '3ç§' },
  { label: 'ğŸ® ç»ƒä¹ å…³å¡', value: 'âˆ' },
  { label: 'ğŸ† æ¸¸æˆæ¨¡å¼', value: '2ä¸ª' }
]

const selectMethodAndNavigate = (method: MathMethod) => {
  playSound('click')
  gameStore.selectMethod(method)
  router.push('/learning')
}
</script>

<style scoped>
/* æ˜Ÿç©ºèƒŒæ™¯æ•ˆæœ */
.stars {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="0.5" fill="%23ffffff" opacity="0.8"/><circle cx="80" cy="30" r="0.3" fill="%23ffffff" opacity="0.6"/><circle cx="40" cy="60" r="0.4" fill="%23ffffff" opacity="0.7"/><circle cx="70" cy="80" r="0.2" fill="%23ffffff" opacity="0.5"/><circle cx="10" cy="90" r="0.3" fill="%23ffffff" opacity="0.6"/><circle cx="90" cy="10" r="0.4" fill="%23ffffff" opacity="0.8"/><circle cx="60" cy="40" r="0.2" fill="%23ffffff" opacity="0.5"/><circle cx="30" cy="80" r="0.3" fill="%23ffffff" opacity="0.7"/></svg>') repeat;
  animation: sparkle 20s linear infinite;
}

.twinkling {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: transparent url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="25" cy="25" r="0.3" fill="%23ffd700" opacity="0.9"/><circle cx="75" cy="35" r="0.2" fill="%23ffd700" opacity="0.7"/><circle cx="45" cy="65" r="0.4" fill="%23ffd700" opacity="0.8"/><circle cx="65" cy="85" r="0.2" fill="%23ffd700" opacity="0.6"/><circle cx="15" cy="85" r="0.3" fill="%23ffd700" opacity="0.7"/></svg>') repeat;
  animation: twinkling 15s linear infinite;
}

@keyframes sparkle {
  from { transform: translateX(0); }
  to { transform: translateX(-100px); }
}

@keyframes twinkling {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

/* è‡ªå®šä¹‰åŠ¨ç”» */
@keyframes spin-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.animate-spin-slow {
  animation: spin-slow 8s linear infinite;
}

/* æµ®åŠ¨åŠ¨ç”» */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-15px); }
}

.animate-float {
  animation: float 4s ease-in-out infinite;
}

/* è„‰å†²åŠ¨ç”»å¢å¼º */
@keyframes pulse-glow {
  0%, 100% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.05);
    filter: brightness(1.2);
  }
}

.animate-pulse {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* æ¸å˜æ–‡å­—æ•ˆæœ */
.gradient-text {
  background: linear-gradient(135deg, #fbbf24, #f59e0b, #d97706);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  background-size: 200% 200%;
  animation: gradient-shift 3s ease infinite;
}

@keyframes gradient-shift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* ç»ç’ƒæ€æ•ˆæœå¢å¼º */
.backdrop-blur-sm {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* æ‚¬åœæ•ˆæœ */
.hover-lift {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.hover-lift:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
}

/* æŒ‰é’®å‘å…‰æ•ˆæœ */
.btn-glow {
  position: relative;
  overflow: hidden;
}

.btn-glow::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.5s;
}

.btn-glow:hover::before {
  left: 100%;
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .stars, .twinkling {
    background-size: 50px 50px;
  }
}

/* æ»šåŠ¨åŠ¨ç”» */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.8s ease-out;
}
</style>